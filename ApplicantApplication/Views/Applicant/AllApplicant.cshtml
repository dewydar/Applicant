@model ApplicantVM

@{
    ViewBag.Title = "AllApplicant";
}

<h2>AllApplicant</h2>

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addApplicant">
    Add new Applicant
</button>
<table class="table">
    <thead>
        <tr>
            <th>
                Name
            </th>
            <th>
                BirthDate
            </th>
            <th>
                Mobile No
            </th>
            <th>
                Email
            </th>
            <th>
                Gender
            </th>
        </tr>
    </thead>
    <tbody id="tbody">
        @foreach (var item in Model.Applicants)
        {
            <tr id="@item.ID">
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.BirthDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MobileNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EMail)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Gender.Name)
                </td>
            </tr>
        }
    </tbody>
</table>
@{
    AjaxOptions ajaxOpt = new AjaxOptions
    {
        HttpMethod = "POST",
        OnSuccess = "onSuccess()",
        InsertionMode = InsertionMode.InsertAfter,
        UpdateTargetId = "tbody"
    };
}


<div class="modal fade" id="addApplicant" tabindex="-1" role="dialog" aria-labelledby="addApplicantLabel">
    <div class="modal-dialog" role="document">
        @using (Ajax.BeginForm("CreateApplicant", "Applicant", ajaxOpt))
        {
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Add Applicant</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        @Html.LabelFor(m => m.NewApplicant.Name)
                        @Html.EditorFor(m => m.NewApplicant.Name, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(m => m.NewApplicant.Name)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.NewApplicant.BirthDate, "Birth Date", htmlAttributes: new { @class = "control-label", id = "date" })
                        <input type="date" name="BirthDate" class="form-control col-12" />
                        @Html.ValidationMessageFor(m => m.NewApplicant.BirthDate)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.NewApplicant.MobileNo, "Mobile Number")
                        @Html.EditorFor(m => m.NewApplicant.MobileNo, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(m => m.NewApplicant.MobileNo)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.NewApplicant.EMail, "Email")
                        @Html.EditorFor(m => m.NewApplicant.EMail, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(m => m.NewApplicant.EMail)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.NewApplicant.GenderId)
                        @Html.DropDownListFor(m => m.NewApplicant.GenderId, ViewBag.Gender as SelectList, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(m => m.NewApplicant.GenderId)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.ApplicantQualification.CertificationTypeId, "Certification Type")
                        @Html.DropDownListFor(m => m.ApplicantQualification.CertificationType.ID, ViewBag.CertificationTypes as SelectList, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(m => m.ApplicantQualification.CertificationType)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.ApplicantQualification.CertificationSpecificId, "Certification Specific")
                        @Html.DropDownListFor(m => m.ApplicantQualification.CertificationSpecific.ID, ViewBag.CertificationSpecifics as SelectList, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(m => m.ApplicantQualification.CertificationSpecific)
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.ApplicantApplicationsField.ApplicationsFieldId, "Applications Fields")
                        @for (int i = 0; i < Model.ApplicationsFields.Count(); i++)
                            {
                                <br /><input  name="AreChecked" type="checkbox" value="@Model.ApplicationsFields[i].ID" />@Model.ApplicationsFields[i].Name
                        @Html.ValidationMessageFor(m => m.ApplicantApplicationsField.ApplicationsFieldId)
                            }
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Add</button>
                </div>
            </div>
        }
    </div>
</div>
@section scripts {
    <script>
        function onSuccess() {
            $('#addApplicant').modal('hide');
        }

    </script>
}